{"version":3,"sources":["./apps/angular-store-app/src/app/stories/state/stories.store.ts","./apps/angular-store-app/src/app/stories/state/stories.service.ts","./apps/angular-store-app/src/app/stories/state/stories.query.ts","./apps/angular-store-app/src/app/stories/state/story.model.ts","./apps/angular-store-app/src/app/stories/stories.module.ts","./apps/angular-store-app/src/app/stories/stories/stories.component.ts","./apps/angular-store-app/src/app/stories/stories/stories.component.html"],"names":[],"mappings":"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","file":"stories-stories-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Story } from './story.model';\nimport { EntityState, EntityStore, StoreConfig } from '@datorama/akita';\n\nexport interface StoriesState extends EntityState<Story> {\n  loading: boolean;\n  someBoolean: boolean;\n  skills: string[];\n  config: {\n    tankOwners: string[];\n    time: string;\n    isAdmin: boolean;\n  };\n}\n\nconst initialState: StoriesState = {\n  loading: false,\n  someBoolean: true,\n  skills: ['JS'],\n  config: {\n    time: '',\n    tankOwners: ['one', 'two '],\n    isAdmin: false\n  }\n};\n\n@Injectable({ providedIn: 'root' })\n@StoreConfig({ name: 'stories' })\nexport class StoriesStore extends EntityStore<StoriesState> {\n  constructor() {\n    super(initialState);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { StoriesStore } from './stories.store';\nimport { mapTo, tap } from 'rxjs/operators';\nimport { timer } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class StoriesService {\n  constructor(private storiesStore: StoriesStore) {}\n\n  add(story) {\n    this.storiesStore.setLoading(true);\n    return timer(1000)\n      .pipe(mapTo(story))\n      .pipe(\n        tap(story => {\n          this.storiesStore.setLoading(false);\n          this.storiesStore.add(story);\n        })\n      );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { StoriesStore, StoriesState } from './stories.store';\nimport { QueryEntity } from '@datorama/akita';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StoriesQuery extends QueryEntity<StoriesState> {\n  constructor(protected store: StoriesStore) {\n    super(store);\n  }\n}\n","export type Story = {\n  title: string;\n  story: string;\n  draft: boolean;\n  category: string;\n};\n\nexport function createStory() {\n  return {\n    title: '',\n    story: '',\n    draft: false,\n    category: 'js'\n  } as Story;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { StoriesComponent } from './stories/stories.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StoriesComponent\n  }\n];\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, RouterModule.forChild(routes)],\n  declarations: [StoriesComponent]\n})\nexport class StoriesModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { PersistNgFormPlugin } from '@datorama/akita';\nimport { StoriesQuery } from '../state/stories.query';\nimport { createStory, Story } from '../state/story.model';\nimport { StoriesService } from '../state/stories.service';\n\n@Component({\n  selector: 'app-stories',\n  templateUrl: './stories.component.html',\n  styleUrls: ['./stories.component.css']\n})\nexport class StoriesComponent implements OnInit {\n  form: FormGroup;\n  formKeyBased: FormGroup;\n  formRootKey: FormGroup;\n  storeValue;\n  persistForm: PersistNgFormPlugin<Story>;\n  persistFormKey: PersistNgFormPlugin;\n  persistFormRootKey: PersistNgFormPlugin;\n  loading$: Observable<boolean>;\n\n  constructor(private storiesQuery: StoriesQuery, private storiesService: StoriesService, private builder: FormBuilder) {}\n\n  ngOnInit() {\n    this.loading$ = this.storiesQuery.selectLoading();\n\n    this.form = this.builder.group({\n      title: this.builder.control(''),\n      story: this.builder.control(''),\n      draft: this.builder.control(false),\n      category: this.builder.control('js')\n    });\n\n    this.formKeyBased = this.builder.group({\n      time: this.builder.control(''),\n      tankOwners: this.builder.array([]),\n      isAdmin: this.builder.control(null)\n    });\n\n    this.formRootKey = this.builder.group({\n      skills: this.builder.array([]),\n      someBoolean: this.builder.control(false)\n    });\n\n    this.persistForm = new PersistNgFormPlugin(this.storiesQuery, createStory).setForm(this.form);\n    this.persistFormKey = new PersistNgFormPlugin(this.storiesQuery, 'config').setForm(this.formKeyBased, this.builder);\n    this.persistFormRootKey = new PersistNgFormPlugin(this.storiesQuery).setForm(this.formRootKey, this.builder);\n    this.storeValue = this.storiesQuery.select(state => state.akitaForm);\n  }\n\n  submit() {\n    this.storiesService.add(this.form.value).subscribe(() => this.persistForm.reset());\n    this.persistFormKey.reset();\n    this.persistFormRootKey.reset();\n  }\n\n  ngOnDestroy() {\n    this.persistForm && this.persistForm.destroy();\n  }\n\n  addSkill() {\n    (this.formRootKey.get('skills') as FormArray).push(this.builder.control('Akita'));\n  }\n}\n","<section class=\"padding\">\n\n  <h5>Root Key</h5>\n  <form class=\"col s12\" [formGroup]=\"formRootKey\">\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <p>\n          <label>\n            <input type=\"checkbox\" formControlName=\"someBoolean\"/>\n            <span>Is Admin</span>\n          </label>\n        </p>\n      </div>\n    </div>\n    <button (click)=\"addSkill()\">Add skill</button>\n    {{formRootKey.value | json}}\n  </form>\n\n  {{formKeyBased.value | json}}\n  <h5>Key Based</h5>\n  <form class=\"col s12\" [formGroup]=\"formKeyBased\" (ngSubmit)=\"submit()\">\n    <div class=\"row\">\n      <div class=\"input-field col s12\">\n        <input autocomplete=\"off\" formControlName=\"time\" placeholder=\"Time\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <p>\n          <label>\n            <input type=\"checkbox\" formControlName=\"isAdmin\"/>\n            <span>Is Admin</span>\n          </label>\n        </p>\n      </div>\n    </div>\n  </form>\n\n  <h5>New Story</h5>\n\n  <div class=\"row\">\n    <form class=\"col s12\" [formGroup]=\"form\" (ngSubmit)=\"submit()\">\n\n\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input id=\"title\" type=\"text\" autocomplete=\"off\" formControlName=\"title\" placeholder=\"Title\">\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <textarea id=\"story\" class=\"materialize-textarea\" formControlName=\"story\" placeholder=\"Story\"></textarea>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <p>\n            <label>\n              <input type=\"checkbox\" formControlName=\"draft\"/>\n              <span>Draft</span>\n            </label>\n          </p>\n        </div>\n      </div>\n\n\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <label>Category</label>\n          <select class=\"browser-default\" formControlName=\"category\">\n            <option value=\"js\">JavaScript</option>\n            <option value=\"rxjs\">RxJS</option>\n            <option value=\"angular\">Angular</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"progress\" *ngIf=\"loading$ | async\">\n        <div class=\"indeterminate\"></div>\n      </div>\n\n      <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Submit\n        <i class=\"material-icons right\">send</i>\n      </button>\n\n    </form>\n\n  </div>\n\n  <div class=\"row\">\n    <section style=\"margin-top: 10px\">\n      <h6>Form local value:</h6>\n      {{form.value | json}}\n\n      <h6>Store value:</h6>\n      {{storeValue | async | json}}\n    </section>\n  </div>\n\n</section>"],"sourceRoot":"webpack:///"}